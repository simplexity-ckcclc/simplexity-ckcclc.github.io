<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"simplexity.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Simple is Complex">
<meta property="og:type" content="website">
<meta property="og:title" content="Simplexity">
<meta property="og:url" content="https://simplexity.cn/index.html">
<meta property="og:site_name" content="Simplexity">
<meta property="og:description" content="Simple is Complex">
<meta property="og:locale">
<meta property="article:author" content="Travis Wong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://simplexity.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Simplexity</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Simplexity</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">13</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">53</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/zk-snark-paper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/zk-snark-paper/" class="post-title-link" itemprop="url">零知识证明： Why and How zk-SNARK Works：Definitive Explanation论文学习笔记</a>
        </h2>

        <div class="post-meta">

          
            <i class="far fa-star"></i>
            <font color=green>Sticky</font>
            <span class="post-meta-divider">|</span>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-12 21:26:30" itemprop="dateCreated datePublished" datetime="2020-08-12T21:26:30+08:00">2020-08-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-13 14:55:27" itemprop="dateModified" datetime="2025-01-13T14:55:27+08:00">2025-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Consensus-Cryptography/" itemprop="url" rel="index"><span itemprop="name">Consensus & Cryptography</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>13k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>43 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文为<a target="_blank" rel="noopener external nofollow noreferrer" href="https://arxiv.org/abs/1906.07221">Why and How zk-SNARK Works: Definitive Explanation</a>论文学习心得，纯粹个人在阅读过程中的疑问和思考，读后感受到数学之美。详细的理解请阅读<a href="http://simplexity.cn/articles/zk-snark-paper/#ref">附录</a>引用的文章。（PS. 于24年7月重读文章，并且根据最新理解更正了之前的不少理解错误。仍在学习中，错漏之处敬请指教）</p>
<blockquote>
<p>零知识证明从原始逻辑，简化到一阶约束电路(rank-1 constraint system, R1CS)，再等同转换为多项式（quadratic arithmetic program，QAP）。这个过程的逻辑可以参考V神的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://medium.com/@VitalikButerin/quadratic-arithmetic-programs-from-zero-to-hero-f6d558cea649">文章</a>。零知识证明的最终都落脚到对多项式的证明。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/zk-snark-paper/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/dunbar-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/dunbar-project/" class="post-title-link" itemprop="url">CBDC系列（7） - Dunbar项目(wCBDC跨境支付, 商业银行的多角色)</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-03-21 11:40:38" itemprop="dateCreated datePublished" datetime="2024-03-21T11:40:38+08:00">2024-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-10 16:15:31" itemprop="dateModified" datetime="2025-01-10T16:15:31+08:00">2025-01-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Dunbar项目是BIS新加坡创新中心，the Reserve Bank of Australia (RBA), the Bank Negara Malaysia (BNM), the Monetary Authority of Singapore (MAS) and the South African Reserve Bank (SARB) 在2021年合作实验项目，意在研究批发型CBDC在跨境结算中发挥的作用，并在同年11月公开发布研究报告。具体参见BIS的项目介绍<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bis.org/about/bisih/topics/cbdc/dunbar.html">Project Dunbar: international settlements using multi-CBDCs</a>。</p>
<p>Dunbar项目的探讨了跨境支付，FX等场景，与其他的跨境批发CBDC项目（例如Jura, mBridge等）关注点基本一致。同时，报告中也有其独特的有意思的一些设计。<br>
1.项目的组织。项目拆分为设计和技术开发两个工作组，职责分离；设计工作组着眼于业务需求，包括交易流程设计，合规监管，治理模式等；而作为试验性的项目，技术开发采用了Corda（账本隔离，只能看到己方相关交易信息，不存在全局一本帐）和Quorum（类企业级以太坊，以dApp智能合约的方式按币种逻辑隔离，用Tessera方案解决隐私）两种常用的DLT技术路线并行开发原型，探讨不同的技术路线对于需求的满足度。整个过程采用敏捷开发的方式，拆分迭代，适合这种多团队间的合作。</p>
<div style="width:90%;margin:auto">
    <img src="/images/dunbar-project/sprint-objective.jpg">
    <div style="text-align: center">图1 拓扑</div>
</div>
<p>2.角色的划分。虽然项目的目的是为了解决当前跨境支付中依赖中介，导致交易链路长，耗时多，费用高等痛点，但考虑到实际中由于参与银行的规模，从属等，也试图最大程度利用代理银行的优势。项目将参与各方划分成以下多个角色职责，主要关注银行的划分。特许银行（一般是规模大实力强的本地银行）承担最多的职能，包括与传统支付系统互联，执行CBDC交易，登入其他非特许银行/非本地银行，对其进行AML审查等。相比其他项目里只考虑了直参，dunbar在角色设计考虑的更多，并且也赋予此类特许银行更高的权限，参与到整个项目的治理中，而并非仅仅只是规则遵守者。</p>
<div style="width:70%;margin:auto">
    <img src="/images/dunbar-project/participant-role.jpg">
    <div style="text-align: center">图2 参与者角色</div>
</div>
<p>由于各参与方（主要是商业银行）的职责和参与度不同，跨境支付场景下的流程简化如下。其中，只有收付双方的Sponsor bank都执行完AML等风控措施通过后，批准执行交易，此交易才会在智能合约里执行。</p>
<div style="width:70%;margin:auto">
    <img src="/images/dunbar-project/payment-flow.jpg">
    <div style="text-align: center">图3 跨境支付流程</div>
</div>
<p>对于FX，则对比了多个模型，其中考虑到AMM(Automated market- making)这种在加密资产业界常用的方式。具体的本期没有过多的展开和实现，留到将来的研究。</p>
<div style="width:80%;margin:auto">
    <img src="/images/dunbar-project/fx-model.jpg">
    <div style="text-align: center">图4 FX模型</div>
</div>
<p>3.未来多平台互联。报告最后预测了将来的multi-CBDC平台会是多个地区性平台互联组成的一个通用平台，而不是全球唯一的。下一步的工作是保证这些平台的互联互通。个人深以为然，在当前BIS的牵头下已经存在了多个类似项目的持续试验和演进中，在技术上是可行的，在治理方面，各平台方有各自协商一致的治理方式，合规等，比起传统swift仅仅只是消息系统，当前的mCBDC平台赋予了更多的能力，及时结算，这个与各辖区的法令和风控制度等也有很大的关联，一个全球参与建设的平台从协商组织上难度也很大，最后很容易沦为寡头政治的金融工具。因此，当前BIS牵头的多个mCBDC平台在齐头并进，并且有更多的项目也在新增研发中。同一个实体同时参加不同的项目，不同的区域性性平台，也是会出现的。</p>

      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/ubin-phase-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/ubin-phase-2/" class="post-title-link" itemprop="url">CBDC系列（6） - Ubin项目阶段 II (DLT技术实现RTGS的排队/解锁功能研究)</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-29 17:25:08 / Modified: 17:38:51" itemprop="dateCreated datePublished" datetime="2023-12-29T17:25:08+08:00">2023-12-29</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>7 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ubin项目是由新加坡金管局（Monetary Authority of Singapore, MAS）主导的旨在探索利用DLT技术在支付/证券领域的清算结算可行性的研究项目。这个是一个跨度多年多阶段的长期项目，始于2016年，截止当前已完成了5个阶段的实验和研究报告。同时Ubin项目也为另一个跨境CBDC项目Dunbar提供了技术基础。具体可以参见MAS的官网的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.mas.gov.sg/schemes-and-initiatives/project-ubin">Ubin项目</a>介绍及BIS的项目介绍。本文只谈早在2017年11月完成的阶段2里的队列管理和gridlock的关键理解，主要基于其<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.mas.gov.sg/-/media/mas/projectubin/project-ubin-phase-2-reimagining-rtgs.pdf">研究报告Project Ubin Phase 2: Re-imagining Interbank RTGS using DLT</a>及<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/project-ubin">github源码</a>，虽然时间比较早，但是其算法设计仍可以参考，包括前一期IL2项目，也是明确提到参考了本实验的实现。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/ubin-phase-2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/inthanon-lionrock-phase-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/inthanon-lionrock-phase-2/" class="post-title-link" itemprop="url">CBDC系列（5） - Inthonan-LionRock项目阶段 II (wCBDC跨境支付)</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-30 17:51:15" itemprop="dateCreated datePublished" datetime="2023-11-30T17:51:15+08:00">2023-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-10 16:23:45" itemprop="dateModified" datetime="2025-01-10T16:23:45+08:00">2025-01-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>4.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>16 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文基于BIS于2021年9月发布的Inthonan-LionRock项目的二阶段报告<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bis.org/publ/othp40.htm">Inthanon-LionRock to mBridge: building a multi CBDC platform for international payments</a>。本阶段结束后，新增了中国大陆央行和阿联酋央行，项目也被重新命名为mBridge，也就是现在熟知的多边央行数字货币桥项目。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/inthanon-lionrock-phase-2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/inthanon-lionrock-phase-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/inthanon-lionrock-phase-1/" class="post-title-link" itemprop="url">CBDC系列（4） - Inthonan-LionRock项目阶段 I (wCBDC跨境支付)</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-08-31 19:47:59" itemprop="dateCreated datePublished" datetime="2023-08-31T19:47:59+08:00">2023-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-10 16:23:24" itemprop="dateModified" datetime="2025-01-10T16:23:24+08:00">2025-01-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Inthonan-LionRock项目是多边央行数字货币桥项目mBridge的前身，由BIS香港创新中心，泰国央行(BOT)，香港金管局(HKMA)合作实验项目，意在研究批发型CBDC在跨境结算中发挥的作用。Inthonan-LionRock项目阶段一早在2019年9月启动，2020年1月宣布结束，并且发布了项目的研究报告。本分析完全基于BIS官网公开的项目研究报告<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bis.org/publ/othp40.pdf">Inthanon-LionRock : Leveraging Distributed Ledger Technology to Increase Efficiency in Cross-Border Payments</a>。虽然项目时间较为久远，但仍有参考学习意义。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/inthanon-lionrock-phase-1/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/jura-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/jura-project/" class="post-title-link" itemprop="url">CBDC系列（3） - Jura项目(wCBDC跨境支付, 基于DLT的PvP & DvP)</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-07-27 23:47:57" itemprop="dateCreated datePublished" datetime="2023-07-27T23:47:57+08:00">2023-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-10 16:25:30" itemprop="dateModified" datetime="2025-01-10T16:25:30+08:00">2025-01-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Jura项目是BIS创新中心，Bank of France，Swiss National Bank在2021年合作实验项目，意在研究批发型CBDC在跨境结算中发挥的作用，并在同年12月公开发布研究报告。具体参见BIS的项目介绍<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bis.org/about/bisih/topics/cbdc/jura.htm">Project Jura - Cross-border settlement using wholesale CBDC</a>。</p>
<div style="width:70%;margin:auto">
    <img src="/images/jura-project/architecture.png">
    <div style="text-align: center">图1 拓扑</div>
</div>
<p>项目的主要技术服务商是R3，技术架构就采用了Corda。这个是wholesale CBDC的场景，Corda的性能和设计理念也算比较契合。</p>
<ol>
<li>资产代币化asset tokenize。商业票据Comercial Paper（CP）由DAR生成数字资产，通过Gateway（也就是图中的NATIXIS）mirror映射到平台上，同时赋予了所有者等属性。对应到Corda里的概念，就是state，可关联到实际环境中的资产和条款等。Corda的这种设计，将wCBDC和CP在技术逻辑上一致，使得这个单一的第三方运营的SDX测试平台可以用相似的逻辑去支持PvP和DvP交易。</li>
<li>发行/赎回。SDX平台有几类节点，Notary node, Issuer node, Monitor/Observer node监管节点, Bank node。其中，Issuer node跟RTGS完成传统账户体系的兑换。在白皮书里提到 “In Project Jura, EUR and CHF wCBDC and the NEU CP token on the SDX test platform had no legal force, meaning that the wCBDCs did not represent a direct central bank liability.” 这点感觉更多的是强调<strong>非直接央行负债</strong>，实际上是明确了issuer居中转换的必要地位。</li>
<li>不同的资产类型通常属于司法管辖区，由不同的notary公证人节点，通常由该资产管理员角色来承担，例如商行，或者授权的管理者。由于Corda的无需全局广播共识的设计，因此单个种类资产的交易情况，只需要该资产的notary进行签署，保证了账本或者资产管辖的独立性隔离性。由于notary节点通常只是技术意义上的，不授权查看具体的交易内容，通常引入监管节点来监控具体的交易（一种办法是只需在交易规则上配置有效的交易需要监管节点签名）。</li>
<li>子网划分。各个央行可以独立划分和管理子网，允许商行节点接入子网进行业务，实际上就是实现了对其管辖货币的准入机制，只有接入该子网的商行节点才能执行该种资产的业务。在本次实验的拓扑中，银行节点是物理网络联通的，这在实际情况中由于网络策略管控，特别是随着银行借点数量增加，往往是不可全联通的。一种替代方案是参考DAR的类似做法，通过每个央行子网引入Operator Node（可以是逻辑的，与其他角色的node，例如Observer Node共用）作为Gateway，同时不同子网Gatewa互联，本国的商行只与本国的Gateway联通，把全网变成雪花拓扑结构。跨司法领域的，例如外币兑换等，就需要通过Gateway与他国商行交互，这种路由方式可以由全局的网络地图服务提供。这种方式，使得每笔交易都经过了交易双方央行及交易货币对的所属央行，满足监管需要。</li>
<li>DvP,PvP的交易，涉及两种资产在两个子网的处置，需要两种资产的notary的签名赋予有效性。为保证交易的原子性，引入了R3的dual-notary signing机制，即哈希时间锁算法（在前面的bitcoin闪电网络部分有介绍过），常用的跨链方案。具体参看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bis.org/publ/othp44.pdf">Jura项目白皮书</a>附录部分。</li>
</ol>
<div style="width:50%;margin:auto">
    <img src="/images/jura-project/dual-notary-1.png">
</div>
<div style="width:50%;margin:auto">
    <img src="/images/jura-project/dual-notary-2.png">
    <div style="text-align: center">图2 dual-notary signing机制</div>
</div>

      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/understanding-corda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/understanding-corda/" class="post-title-link" itemprop="url">R3 Corda概念理解</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-07-25 15:15:39" itemprop="dateCreated datePublished" datetime="2023-07-25T15:15:39+08:00">2023-07-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-07-27 16:53:34" itemprop="dateModified" datetime="2023-07-27T16:53:34+08:00">2023-07-27</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>13 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Corda的设计理念"><a href="#Corda的设计理念" class="headerlink" title="Corda的设计理念"></a>Corda的设计理念</h3><blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.finyear.com/R3-Corda-A-Distributed-Ledger-Designed-for-Financial-Services_a35855.html">R3 Corda: A Distributed Ledger Designed for Financial Services</a> : R3 CTO在2016年设计之初分享的设计理念及心路历程</p>
</blockquote>
<ol>
<li>专门针对金融场景开发，而非通用区块链。受区块链思想的影响，在很多设计理念上考虑了当前金融领域的特点和经典场景。<ul>
<li>交易不再全局广播，只在相关方可见；</li>
<li>引入可信公证人机制；</li>
<li>没有经典的区块&amp;全局一条链的设计等等；</li>
</ul>
</li>
<li>借鉴了区块链经典思想，回归到本质：共识，有效性，唯一性，不可篡改性，可验证性。<ul>
<li>使用公证人机制防止双花；</li>
<li>UTXO模型，从单纯的资产扩展到状态；</li>
<li>签名放篡改抵赖；</li>
</ul>
</li>
</ol>
<p><em>无链之链，非链之链</em>。更恰当应该叫分布式账本DLT。基于金融领域真实存在的一些假设和前提（例如存在可信公证人），更像是借鉴区块链思想去解决金融领域的实际问题，提升效率。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/understanding-corda/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/retry-strategy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/retry-strategy/" class="post-title-link" itemprop="url">失败任务重试策略</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-05-08 17:16:35" itemprop="dateCreated datePublished" datetime="2023-05-08T17:16:35+08:00">2023-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-01-10 16:04:02" itemprop="dateModified" datetime="2025-01-10T16:04:02+08:00">2025-01-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="场景描述"><a class="markdownIt-Anchor" href="#场景描述"></a> 场景描述</h3>
<p>系统需要每个小时启动多个定时任务，分别与若干个第三方系统进行交互，执行批处理任务。各个批处理定时任务具备强独立性，即第三方系统间相互独立，即A系统的失败不影响B系统的任务；同一系统各个批次的任务相互独立，即A系统0点的任务失败不影响1点的任务。批处理任务的实时性要求低，且存在一定的失败概率（原因可能来自本系统，也可能是第三方系统）。如果是因为系统bug，则此修复时间可能会相对较长。因而，容易积累大量的失败历史任务。失败的任务可以并且需要重试，同时重试不能影响当前时刻正常运行的任务。因为重试过程同样占用系统资源，因此需要限制每个小时重试的任务数。当存在大量的失败任务时，需要相应的调度策略来从中选择重试的任务。</p>
<h3 id="策略一-平均主义"><a class="markdownIt-Anchor" href="#策略一-平均主义"></a> 策略一： 平均主义</h3>
<h4 id="基本策略"><a class="markdownIt-Anchor" href="#基本策略"></a> 基本策略</h4>
<p>轮询的方式，每个小时重试选择<code>updateTime</code>距今最久远的任务（重试的时候会更新<code>updateTime</code>）。同时设置重试任务的<code>createTime</code>阈值（例如最近一个月），早于此时间创建的任务将不再自动重试，需要人工介入。保证任务调度相对公平，每个任务重试的间隔大致相同，历史任务避免饥饿问题。</p>
<h4 id="遇到问题"><a class="markdownIt-Anchor" href="#遇到问题"></a> 遇到问题</h4>
<ol>
<li>实际运行过程中发现此方案无法很好的应对系统抖动。当本系统恰好在正常任务调度时刻进行系统更新，导致本批次所有定时任务都失败。同时存在A系统因为其系统bug，每个批次都是失败状态。由于积压了大量的A系统的历史失败任务，并且优先重试最早的任务，导致本批次的所有任务被挤压到重试队列的最后。即先把A系统的历史任务都重试，导致A系统外的所有系统被影响，甚至可能需要等上若干天。间接破坏了系统间的独立性。</li>
<li>极端情况下，当全局只有唯一失败任务，并且该任务理论上无法成功时，该任务仍然会被每小时重试，浪费系统资源。</li>
</ol>
<h3 id="策略二指数退避"><a class="markdownIt-Anchor" href="#策略二指数退避"></a> 策略二：指数退避</h3>
<h4 id="改进思路"><a class="markdownIt-Anchor" href="#改进思路"></a> 改进思路</h4>
<ol>
<li>原则上，最近失败的更新鲜的任务应该是被调度重试的优先级更高，而且被重试的频率概率更高。</li>
<li>对于历史失败任务，不再每个小时都尝试去重试，以减小系统压力。</li>
</ol>
<h4 id="具体方式"><a class="markdownIt-Anchor" href="#具体方式"></a> 具体方式</h4>
<ol>
<li>采用指数退避方式，退避间隔以2的指数增长，最大间隔32小时。例如，0点的任务，<strong>计划重试</strong>的时间依次为： 1点，3点，7点，15点，第二天7点（+16），（+32），（+32）， …。 在间隔内的其他时刻，例如2点，4点，5点等，不再尝试重试。</li>
<li>对于每个失败任务，按照以下方式<strong>粗略计算</strong>优先级，由高到低排序选择。若当前时刻在下一次计划重试前，则计算所得的<code>priority</code>非正数，该任务需要被过滤掉不在当前时刻重试。</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">priority = (backoffToNow + 1) / (createToUpdate + 1)</span><br><span class="line"></span><br><span class="line">priority：优先级</span><br><span class="line">backoff：下一个计划重试时刻</span><br></pre></td></tr></tbody></table></figure>
<h4 id="若干简单案例"><a class="markdownIt-Anchor" href="#若干简单案例"></a> 若干简单案例</h4>
<ol>
<li>0点的任务，更新时间是1点（上次重试），当前时间是2点，下一个计划重试时间3点，计算出来 <code>p = (2-3+1) / (1-0+1) = 0</code>， 非正数，意味下一个计划调度时间在未来，当前时刻不尝试。</li>
<li>当前时间2点，两个任务，第一个是0点的任务，计划1点重试，由于1点时候存在大量重试任务（例如0点批次所有系统都失败），重试名额有限没有被选择；第二个任务是1点的，计划2点重试，计算出来 <code>p1 = (2-1+1) / (1-0+1) = 1</code>，<code>p2 = (2-2+1) / (2-1+1) = 0.5</code>，任务1的优先级更高。虽然两个任务都是第一次调度，但任务1的计划时间更早，也就是滞后其计划重试时间更长。</li>
<li>当前时间7点，两个任务，第一个是0点的任务，更新时间是3点（第二次重试），计划7点重试；第二个任务是4点的，更新时间是5点（第一次重试），也是计划7点重试，计算出来 <code>p1 = (7-7+1) / (3-0+1) = 0.25</code>，<code>p2 = (7-7+1) / (5-4+1) = 0.5</code>，任务2的优先级更高。虽然两个任务都是当前时刻计划重试，但任务2更新鲜，重试次数更少。</li>
</ol>
<ul>
<li>以上仅仅是以简单的方式来选择任务，并非精确计算，有可能在更复杂的组合情况下优先级排序存在问题。**但基本上能保证在新鲜的任务在较短的时间内得到充分的尝试，历史任务得到的机会将会快速衰减。**由于所有任务采用相同的退避策略，仅仅是因为新鲜度导致退避间隔差异，可以认为仍然保留公平性。此方案更多强调应对系统的抖动，同时隐式的认为历史任务的价值随着时间的推移逐步的降低。</li>
</ul>
<h3 id="未来工作"><a class="markdownIt-Anchor" href="#未来工作"></a> 未来工作</h3>
<p>考虑到存在个别系统的bug导致存在大量的失败任务，可引入公平队列，防止单个系统占据了绝大部分的系统资源。</p>

      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/sc-event-listener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/sc-event-listener/" class="post-title-link" itemprop="url">智能合约事件监听的解决方案</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-21 16:23:05" itemprop="dateCreated datePublished" datetime="2023-04-21T16:23:05+08:00">2023-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-10 11:26:59" itemprop="dateModified" datetime="2023-05-10T11:26:59+08:00">2023-05-10</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>合约里经常会包含有事件（event关键字），应用通过监听链上指定合约的指定事件，从而得到相应的数据触发相应的处理，也就是不同的系统不再需要链下的交互（api调用等），在这里链扮演了类似持久化的消息队列的角色。在多数场景下，对于链上事件，应用有着<strong>可以重复读，可以从指定块开始读，不能丢失事件</strong>等等的需求。应用监听智能合约事件，常见有主动轮询链节点和向链节点订阅推送的方式。当单个应用存在多个实例时，需要在各个实例间协调，避免对同一合约事件的重复处理。同时，当前监听实例一旦下线，对于该合约事件的处理需要由其他实例从当前位置接着消费（应用需要额外设计实现协调机制保证不丢事件不重复消费）。本方案将事件监听和消费协同的功能交给中间件及消息队列等组件。应用无需再额外实现实例间的协调机制，只需要负责从消息队列里消费就可以，保证消息at-least-once消费。一次注册，就可满足单应用多实例甚至多应用的共享。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/sc-event-listener/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://simplexity.cn/articles/sc-oracle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Travis Wong">
      <meta itemprop="description" content="Simple is Complex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simplexity">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/sc-oracle/" class="post-title-link" itemprop="url">智能合约预言机</a>
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-20 11:13:08" itemprop="dateCreated datePublished" datetime="2023-04-20T11:13:08+08:00">2023-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-08 11:34:30" itemprop="dateModified" datetime="2023-05-08T11:34:30+08:00">2023-05-08</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>合约运行的可回溯重复执行及执行确定性要求，合约执行过程使用的数据必须被记录，可以采取记录在链上预言机合约内（公链），或者是合约的含预言机返回值的执行凭证（联盟链，用于事后审计）。对于前者，使用链上预言机主要分成三种方式：</p>
<ol>
<li>“立即读取” ： 用户合约直接访问预言机合约读取所需数据。（预言机数据可能被更新，导致多次读取不一致。需要结合数据版本等机制保证，较为复杂）</li>
<li>“订阅发布” ： 关注预言机数据的变化。可以预言机合约在数据变动时，同时发出合约事件。链下应用监听特定的合约事件，然后相应的调用用户合约。本质上还是链下发起的上链交易，区别只是触发时机。</li>
<li>“请求响应” ： 由用户合约执行时组装请求（常见的HTTP请求）向预言机合约请求数据，并且附带回调API。链下的预言机应用监听预言机合约，向外部系统请求数据，然后回写到预言机合约（上链或分布式账本）。然后预言机合约将改响应数据回调前述的用户合约声明的回调API。<em>可以是用以GET获取数据合约内计算，也可以是POST链下应用系统进行复杂计算，获取计算结果。</em>此过程的关键在于保证传输过程的完整性真实性，即防止预言机合约的传递篡改以及数据源作恶。</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/articles/sc-oracle/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    
      <div>
        
      </div>
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Travis Wong"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Travis Wong</p>
  <div class="site-description" itemprop="description">Simple is Complex</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:wchuang5900@gmail.com" title="E-Mail → mailto:wchuang5900@gmail.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-registered"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Travis Wong</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
      
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css">
  <script src="//cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.css">


  

</body>
</html>
